<form autocomplete="off">
    {{#if (hasRole "GM")}}
        <h1>
            <img class="em_halfBottomMargin w3-border-0" src="{{item.img}}" title="{{item.name}}" width="64px" height="64px">
            {{#with (fetch CONFIG.EmConfig.GOVERNMENTS item.system.government.type) as |government| }}
                {{i18n government.name}} {{i18n government.preposition}}
            {{/with}}
            {{i18n item.system.name}}
        </h1>
        <table class="em_table w3-table w3-bordered">
            <thead>
                <tr class="w3-black">
                    <td class="w3-center">property</td>
                    <td class="w3-center">value</td>
                    <td class="w3-center">displayed value</td>
                </tr>
            </thead>
            
            <tbody class="w3-white">
                {{!-- initial data --}}
                <tr>
                    <td class="w3-left">img</td>
                    <td class="w3-center w3-light-gray">
                        <input class="em_inline-field w3-border-0 w3-light-gray" name="item.img" value="{{item.img}}">
                    </td>
                    <td class="w3-center"></td>
                </tr>
                <tr>
                    <td class="w3-left">name</td>
                    <td class="w3-center w3-light-gray">
                        <input class="em_inline-field w3-border-0 w3-light-gray" name="item.system.name" value="{{item.system.name}}">
                    </td>
                    <td class="w3-center">{{i18n item.system.name}}</td>
                </tr>
                <tr>
                    <td class="w3-left">population name</td>
                    <td class="w3-center w3-light-gray">
                        <input class="em_inline-field w3-border-0 w3-light-gray" name="item.system.population.name" value="{{item.system.population.name}}">
                    </td>
                    <td class="w3-center">{{i18n item.system.population.name}}</td>
                </tr>
                <tr>
                    <td class="w3-left">description</td>
                    <td class="w3-center w3-light-gray">
                        <input class="em_inline-field w3-border-0 w3-light-gray" name="item.system.desc" value="{{item.system.desc}}">
                    </td>
                    <td class="w3-center">
                        <textarea class="w3-left w3-white w3-border-0 form-textarea em_halfRightMargin">{{i18n item.system.desc}}</textarea>
                    </td>
                </tr>
                {{!-- government data --}}
                <tr>
                    <td colspan="3" style="padding: 0;margin:0;">
                        <h2 class="em_title w3-center w3-border w3-black" style="padding: 0;margin:0;">Government</h2>
                    </td>
                </tr>
                <tr>
                    {{!-- the type and display data is fetched from the Config --}}
                    <td class="w3-left">government</td>
                    <td class="w3-center w3-light-gray">
                        <select class="em_inline-field em_noShadow w3-border-0 w3-light-gray" name="item.system.government.type">
                            {{#each CONFIG.EmConfig.GOVERNMENTS as |this key|}}
                                <option class="w3-white" {{#if (eq key ../item.system.government.type)}}selected="true"{{/if}}>
                                    {{key}}
                                </option> 
                            {{/each}}
                        </select>
                    </td>
                    <td class="w3-center">{{item.system.government.type}}</td>
                </tr>
                <tr>
                    {{#with (fetch CONFIG.EmConfig.GOVERNMENTS item.system.government.type) as |government| }}
                        <td class="w3-left">government name</td>
                        <td class="w3-light-gray">{{government.name}}</td>
                        <td class="w3-center">{{i18n government.name}}</td>
                    {{/with}}
                </tr>
                {{!-- economy data --}}
                <tr>
                    <td colspan="3" style="padding: 0;margin:0;">
                        <h2 class="em_title w3-center w3-border w3-black" style="padding: 0;margin:0;">Economy</h2>
                    </td>
                </tr>
                <tr>
                    <td class="w3-left">coin name</td>
                    <td class="w3-center w3-light-gray">
                        <input class="em_inline-field w3-border-0 w3-light-gray" name="item.system.economy.coin_name" value="{{item.system.economy.coin_name}}">
                    </td>
                    <td class="w3-center">{{i18n item.system.economy.coin_name}}</td>
                </tr>
            </tbody>
        </table>
        {{!-- unfinished --}}
        <h1> TO BE CONTINUED LATER</h1>



    {{else}}
        <h1>{{i18n errors.missingViewAuthorization}}</h1>
    {{/if}}
</form>